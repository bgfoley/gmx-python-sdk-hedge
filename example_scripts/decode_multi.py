from eth_abi import decode_abi
from eth_utils import function_signature_to_4byte_selector

# The calldata from the multicall
calldata = "0x0000000000000000000000000000000000000000000000000000000000000020" \
           "0000000000000000000000000000000000000000000000000000000000000002" \
           "0000000000000000000000000000000000000000000000000000000000000040" \
           "00000000000000000000000000000000000000000000000000000000000000c0" \
           "0000000000000000000000000000000000000000000000000000000000000044" \
           "7d39aaf100000000000000000000000031ef83a530fde1b38ee9a18093a333d8" \
           "bbbbc40d5000000000000000000000000000000000000000000000000000aef6c" \
           "b89e600000000000000000000000000000000000000000000000000000000000" \
           "00000000000000000000000000000000000000000000000000000000000002a4" \
           "4a393a4100000000000000000000000000000000000000000000000000000000" \
           "0000002000000000000000000000000000000000000000000000000000000000" \
           "000001a00000000000000000000000000000000000000084e9b0e28e8dd1727a" \
           "0c80000000000000000000000000000000000000000000000000000000000000" \
           "000000000000000000000000000000000000000000000000000000000000c6ee5" \
           "c9b3b04f000000000000000000000000000000000000000000000000000046f0" \
           "ca4ae00000000000000000000000000000000000000000000000000000000000" \
           "0000000000000000000000000000000000000000000000000000000000000000" \
           "0000000000000000000000000000000000000000000000000000000000000000" \
           "0000000200000000000000000000000000000000000000000000000000000000" \
           "0000000000000000000000000000000000000000000000000000000000000000" \
           "000000000000000000000000000000009c4b9fa7d403199e83e5f81f194e790c" \
           "dd50496f00000000000000000000000000000000000000000000000000000000" \
           "00000000000000000000000000000000ff000000000000000000000000000000" \
           "00000001000000000000000000000000450bb6774dd8a756274e0ab410795325" \
           "9d2ac54100000000000000000000000082af49447d8a07e3bd95bd0d56f35241" \
           "523fbab100000000000000000000000000000000000000000000000000000000" \
           "000000c000000000000000000000000000000000000000000000000000000000" \
           "0000000000000000000000000000000000000000000000000000000000000000"

# Decode the main data
decoded_data = decode_abi(['bytes[]'], bytes.fromhex(calldata[10:]))[0]

# Decode each function call within the multicall
decoded_functions = []

for data in decoded_data:
    function_selector = data[:4]
    function_data = data[4:]

    decoded_functions.append((function_selector.hex(), function_data.hex()))

for func in decoded_functions:
    print(f"Function Selector: {func[0]}")
    print(f"Function Data: {func[1]}")
    print()
